@model ProductDetailVM

<div class="container my-5">
    <div class="row">
        <!-- Hình ảnh sản phẩm -->
        <div class="col-md-6">
            <div id="productCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">

                    @if (Model.Images != null && Model.Images.Any())
                    {
                        var first = true;
                        foreach (var img in Model.Images)
                        {
                            <div class="carousel-item @(first ? "active" : "")">
                                <img src="@img.ImageUrl" class="d-block w-100 rounded" alt="@Model.Product.ProductName" />
                            </div>
                            first = false;
                        }
                    }
                    else
                    {
                        <div class="carousel-item active">
                            <img src="https://via.placeholder.com/600x400?text=No+Image" class="d-block w-100 rounded" />
                        </div>
                    }
                </div>

                <button class="carousel-control-prev" type="button" data-bs-target="#productCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </button>

                <button class="carousel-control-next" type="button" data-bs-target="#productCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </button>
            </div>
        </div>

        <!-- Thông tin sản phẩm -->
        <div class="col-md-6">
            <h1 class="display-5 text-fastfood">@Model.Product.ProductName</h1>

            <p class="text-muted">Danh mục: @Model.Product.Category?.CategoryName</p>

            <h3 class="text-success">Giá: @Model.Product.Price.ToString("N0") VND</h3>

            <p class="lead">@Model.Product.Descriptions</p>

            <div class="mb-3">
                <label class="form-label fw-bold">Số lượng:</label>
                <input type="number" class="form-control" value="1" min="1" style="width: 100px" />
            </div>

            <button class="btn btn-outline-primary btn-lg me-2">Thêm vào Giỏ Hàng</button>
            <button class="btn btn-primary btn-lg">Đặt Ngay</button>
        </div>
    </div>

    <!-- TAB BUTTONS -->
<ul class="nav nav-tabs" id="productTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active"
                id="description-tab"
                data-bs-toggle="tab"
                data-bs-target="#description"
                type="button"
                role="tab"
                aria-controls="description"
                aria-selected="true">
            Mô Tả
        </button>
    </li>

    <li class="nav-item" role="presentation">
        <button class="nav-link"
                id="ingredients-tab"
                data-bs-toggle="tab"
                data-bs-target="#ingredients"
                type="button"
                role="tab"
                aria-controls="ingredients"
                aria-selected="false">
            Nguyên liệu
        </button>
    </li>
</ul>


<!-- TAB CONTENT -->
    <div class="row mt-5">
            <div class="tab-content mt-1" id="productTabsContent">

                <!-- TAB: MÔ TẢ -->
                <div class="tab-pane fade show active"
                     id="description"
                     role="tabpanel"
                     aria-labelledby="description-tab">

                    <p>
                        @if (!string.IsNullOrEmpty(Model.Product.DetailDescription))
                        {
                            @Html.Raw(
                            Model.Product.DetailDescription
                            .Replace("\r\n", "<br/>")
                            .Replace("\n", "<br/>")
                                                )
                                                }
                        else
                        {
                            <span class="text-muted fst-italic">
                                Chưa có mô tả chi tiết cho sản phẩm này.
                            </span>
                        }
                    </p>

                </div>


                <!-- TAB: NGUYÊN LIỆU -->
                <div class="tab-pane fade"
                     id="ingredients"
                     role="tabpanel"
                     aria-labelledby="ingredients-tab">

                    @if (!string.IsNullOrEmpty(Model.Product.Ingredients))
                    {
                        <ul>
                            @foreach (var ing in Model.Product.Ingredients.Split(','))
                            {
                                <li>@ing.Trim()</li>
                            }
                        </ul>
                    }
                    else
                    {
                        <p class="text-muted fst-italic">
                            Chưa có dữ liệu nguyên liệu.
                        </p>
                    }

                </div>

            </div>

        </div>
    </div>




    <!-- Sản phẩm khác -->
    <div class="container py-3">
        <h3 class="mb-3">Sản phẩm khác</h3>

        <div class="product-row">
            @foreach (var sp in Model.TatCaSanPham)
            {
                <div class="card product-card shadow-sm">
                    <img src="@sp.ImageURL" class="card-img-top" alt="@sp.ProductName" />

                    <div class="card-body d-flex flex-column justify-content-between">
                        <div>
                            <h5 class="card-title">@sp.ProductName</h5>
                            <p class="text-muted small">@sp.Category?.CategoryName</p>
                            <p class="fw-bold text-danger">@sp.Price.ToString("N0") đ</p>
                        </div>

                        <div class="btn-group-custom mt-auto">
                            <a href="/Products/Details/@sp.ProductID" class="btn btn-outline-primary">Chi tiết</a>
                            <button class="btn btn-primary">Thêm vào giỏ</button>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>
